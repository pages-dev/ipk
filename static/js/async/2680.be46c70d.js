"use strict";(self.webpackChunkrebuild_vue3_vant4=self.webpackChunkrebuild_vue3_vant4||[]).push([["2680"],{4904:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFPSURBVHgB7ZRBUoMwFIZfQEfdeYQewSPYlS5c9AYtO+mokBOIJwiUDuiqeAM3zuiqeAOPwBFcOqPyTOwwJiVNw7bDv2CA8L4vvAQA+ux8iDjkjA3QhdH0hsbyYJ6wCAi5NQIIvB9849Cj9KO59zBPxvVX/eZTWjn/JsLyNFFgfkAjQLzrAr9Pk6CusWiuHaUCMbKVcHjZmjmvRUSlC856oY2EQx4vr8MWvOa167g/wSeAeLCSJdk8ZjqJgE8DOpHHNPDqcMVcLbKIWGhwyZKfDiR94V+FHhiig8MPDsUCK4JNEt7rJ95rT26HLbwlEGGMHR/tkSUinEiS9m6ZxQwBQhNcK5AkCy4ZKYB9DvBplc/iBb+emCZgFDTJUlYQJGNFAlDawrcKRExf8za4lWCTRLdddXHBIs8vr+XF+Rn/m5DTLvDOEW+SJayAPn3k/AKdM9nN3uAsxAAAAABJRU5ErkJggg=="},7409:function(e,o,t){t.d(o,{cW:()=>a});var l=t(3794),i=t(7495);let a=(0,l.n)(i.ZP)},5998:function(e,o,t){t(2136),t(8649),t(6376),t(794),t(3603),t(9258),t(5485),t(1046),t(605),t(6029)},5204:function(e,o,t){t.r(o),t.d(o,{default:()=>ec});var l=t(9155);t(3720);var i=t(5e3);t(9242);var a=t(3919);t(5454);var n=t(796),u=t(9395),s=t(4904),d=t(1277),c=t(4496),r=t(4210);t(8246);var m=t(7409);t(5998);var p=t(4936);t(276);var _=t(6265),v=t(2250);let b={class:"popup-box"},w=(0,n.aZ)({__name:"RoomPicker",props:{room_count:{type:Number,required:!0,default:0}},emits:["changeRoomNumber"],setup(e,o){let{expose:t,emit:l}=o,i=(0,n.iH)(!1),a=[],u=e=>{l("changeRoomNumber",e.selectedValues[0]),i.value=!i.value},s=()=>{i.value=!1};return t({updateShow:e=>{for(e[0];e[0]<=e[1];e[0]++)a.push({text:e[0].toString(),value:Number(e[0])});i.value=!i.value}}),(o,t)=>{let l=p.HY,d=m.cW,c=r.GI;return(0,n.wg)(),(0,n.j4)(c,{class:"popup",show:(0,n.SU)(i),"onUpdate:show":t[0]||(t[0]=e=>(0,n.dq)(i)?i.value=e:null),round:"",position:"bottom"},{default:(0,n.w5)(()=>[(0,n._)("div",b,[t[1]||(t[1]=(0,n._)("div",{class:"popup-box-title"},[(0,n._)("img",{src:_,alt:"icon"}),(0,n._)("h3",null,"房间人数"),(0,n._)("img",{src:v,alt:"icon"})],-1)),(0,n.Wm)(d,{"model-value":[Number(e.room_count)],columns:a,onCancel:s,"confirm-button-text":"确认","cancel-button-text":"取消",onConfirm:u},{empty:(0,n.w5)(()=>[(0,n.Wm)(l,{"image-size":"80",description:"暂无数据"})]),_:1},8,["model-value"])])]),_:1},8,["show"])}}});var f=t(3744);let x=(0,f.default)(w,[["__scopeId","data-v-435b0881"]]),k={class:"popup-box"},U=(0,n.aZ)({__name:"WinPicker",props:{winner_count:{type:Number,required:!0,default:0}},emits:["changeWinNumber"],setup(e,o){let{expose:t,emit:l}=o,i=(0,n.iH)(!1),a=[],u=e=>{l("changeWinNumber",e.selectedValues[0]),i.value=!i.value},s=()=>{i.value=!1};return t({updateShow:e=>{for(a.length=0,e[0];e[0]<e[1];e[0]++)a.push({text:e[0].toString(),value:Number(e[0])});i.value=!i.value}}),(o,t)=>{let l=p.HY,d=m.cW,c=r.GI;return(0,n.wg)(),(0,n.j4)(c,{class:"popup",show:(0,n.SU)(i),"onUpdate:show":t[0]||(t[0]=e=>(0,n.dq)(i)?i.value=e:null),round:"",position:"bottom"},{default:(0,n.w5)(()=>[(0,n._)("div",k,[t[1]||(t[1]=(0,n._)("div",{class:"popup-box-title"},[(0,n._)("img",{src:_,alt:"icon"}),(0,n._)("h3",null,"赢家人数"),(0,n._)("img",{src:v,alt:"icon"})],-1)),(0,n.Wm)(d,{"model-value":[Number(e.winner_count)],columns:a,onCancel:s,"confirm-button-text":"确认","cancel-button-text":"取消",onConfirm:u},{empty:(0,n.w5)(()=>[(0,n.Wm)(l,{"image-size":"80",description:"暂无数据"})]),_:1},8,["model-value"])])]),_:1},8,["show"])}}}),S=(0,f.default)(U,[["__scopeId","data-v-fdfc113e"]]),g={class:"popup-box"},h={class:"popup-content"},A={class:"popup-footer"},C=(0,n.aZ)({__name:"Tips",props:{ticket:{type:Number,required:!0,default:0},room_count:{type:Number,required:!0,default:0}},emits:["sureSubmit"],setup(e,o){let{expose:t,emit:i}=o,a=(0,n.iH)(!1),u=()=>{a.value=!a.value},s=()=>{i("sureSubmit"),u()};return t({updateShow:u}),(o,t)=>{let i=l.zx,u=r.GI;return(0,n.wg)(),(0,n.j4)(u,{class:"popup",show:(0,n.SU)(a),"onUpdate:show":t[1]||(t[1]=e=>(0,n.dq)(a)?a.value=e:null),round:""},{default:(0,n.w5)(()=>[(0,n._)("div",g,[t[8]||(t[8]=(0,n._)("div",{class:"popup-box-title"},[(0,n._)("img",{src:_,alt:"icon"}),(0,n._)("h3",null,"提示"),(0,n._)("img",{src:v,alt:"icon"})],-1)),(0,n._)("div",h,[(0,n._)("div",null,[(0,n._)("p",null,[t[2]||(t[2]=(0,n.Uk)("创建房间将扣除 ")),(0,n._)("span",null,(0,n.zw)(e.ticket*e.room_count),1),t[3]||(t[3]=(0,n.Uk)(" 积分作为押金；"))]),t[4]||(t[4]=(0,n._)("p",null,"房间成功结算后押金将原路退回；",-1)),t[5]||(t[5]=(0,n._)("p",null,"若在有效时间内因人数未满等原因可能导致押金不能全额退还！",-1))]),(0,n._)("div",A,[(0,n.Wm)(i,{round:"",class:"btn confirm",onClick:s},{default:(0,n.w5)(()=>t[6]||(t[6]=[(0,n.Uk)("确认")])),_:1}),(0,n.Wm)(i,{round:"",onClick:t[0]||(t[0]=e=>a.value=!1),class:"btn cancel"},{default:(0,n.w5)(()=>t[7]||(t[7]=[(0,n.Uk)("取消")])),_:1})])])])]),_:1},8,["show"])}}}),W=(0,f.default)(C,[["__scopeId","data-v-57bb14ca"]]),y=t.p+"static/image/create_success.374dfc6a.png";var V=t(2991);t(8491);let H={class:"popup-box"},I={class:"popup-content"},N={key:0},P={class:"popup-footer"},q=(0,n.aZ)({__name:"CreateSuccess",props:{roomId:{type:String,required:!0,default:0},roomPwd:{type:String,required:!0,default:0}},setup(e,o){let{expose:t}=o,i=(0,n.iH)(!1),a=()=>{navigator.clipboard.writeText(`房间ID：${e.roomId} 房间密码：${e.roomPwd?e.roomPwd:"无"}`).then(()=>{(0,V.XA)("复制成功")}).catch(e=>{(0,V.LJ)(e)}),i.value=!i.value,d.Z.back()};return t({updateShow:()=>{i.value=!i.value}}),(o,t)=>{let u=l.zx,s=r.GI;return(0,n.wg)(),(0,n.j4)(s,{class:"popup",show:(0,n.SU)(i),"onUpdate:show":t[0]||(t[0]=e=>(0,n.dq)(i)?i.value=e:null),round:""},{default:(0,n.w5)(()=>[(0,n._)("div",H,[t[3]||(t[3]=(0,n._)("div",{class:"popup-box-title"},[(0,n._)("img",{src:_,alt:"icon"}),(0,n._)("h3",null,"创建成功"),(0,n._)("img",{src:v,alt:"icon"})],-1)),(0,n._)("div",I,[t[2]||(t[2]=(0,n._)("img",{src:y,alt:"图片"},null,-1)),(0,n._)("div",null,[(0,n._)("p",null,"房间ID："+(0,n.zw)(e.roomId),1),e.roomPwd?((0,n.wg)(),(0,n.iD)("p",N,"房间密码："+(0,n.zw)(e.roomPwd),1)):(0,n.kq)("",!0)]),(0,n._)("div",P,[(0,n.Wm)(u,{round:"",class:"btn confirm",onClick:a},{default:(0,n.w5)(()=>t[1]||(t[1]=[(0,n.Uk)("复制并关闭")])),_:1})])])])]),_:1},8,["show"])}}}),D=(0,f.default)(q,[["__scopeId","data-v-f01657e8"]]),R={class:"popup-box"},B={class:"group"},Z=["onClick"],J=(0,n.aZ)({__name:"RankPicker",props:{pass_rank:{type:String,required:!0,default:"不限段位"}},emits:["changeRank"],setup(e,o){let{expose:t,emit:l}=o,i=(0,n.iH)(!1),a=(0,n.iH)(e.pass_rank),u=["不限段位","青铜","白银","黄金","铂金","钻石","星耀","王者"],s=e=>{a.value=e},d=()=>{l("changeRank",a),i.value=!1},c=()=>{i.value=!1};return t({show:i}),(e,o)=>{let t=r.GI;return(0,n.wg)(),(0,n.j4)(t,{class:"popup",show:(0,n.SU)(i),"onUpdate:show":o[0]||(o[0]=e=>(0,n.dq)(i)?i.value=e:null),round:"",position:"bottom"},{default:(0,n.w5)(()=>[(0,n._)("div",R,[o[1]||(o[1]=(0,n._)("div",{class:"popup-box-title"},[(0,n._)("img",{src:_,alt:"icon"}),(0,n._)("h3",null,"最低段位"),(0,n._)("img",{src:v,alt:"icon"})],-1)),(0,n._)("div",{class:"flex-btn"},[(0,n._)("div",{onClick:c},"取消"),(0,n._)("div",{onClick:d},"确认")]),(0,n._)("div",B,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(u,(e,o)=>(0,n._)("div",{key:o,class:(0,n.C_)({active:(0,n.SU)(a).includes(e)}),onClick:o=>s(e)},(0,n.zw)(e),11,Z)),64))]),o[2]||(o[2]=(0,n._)("div",{class:"tips"}," 注:您选择的段位（如「青铜」）为 最低限制，则该段位及更高段位的用户均可加入。 ",-1))])]),_:1},8,["show"])}}}),Y=(0,f.default)(J,[["__scopeId","data-v-4f4d4b30"]]);var j=t(6331),z=t(8970);let F={class:"box"},Q={class:"box-item"},O={class:"box-item"},K={class:"box-item"},L={class:"box-item"},M={class:"box-item"},T={class:"box-item-stepper"},E={class:"stepper-box"},G={class:"box-item"},X={class:"box-item"},$={class:"box-item"},ee={class:"box-item"},eo={class:"box-item-input input-box-item-noBg"},et={class:"box-item"},el={class:"mode-box"},ei=["onClick"],ea={class:"tips"},en=["innerHTML"],eu={class:"footer"},es={class:"button"},ed=(0,n.aZ)({__name:"index",setup(e){let o=(0,c.A)(),t=(0,n.iH)(),r=(0,n.iH)(),m=(0,n.iH)(),p=(0,n.iH)(),_=(0,n.iH)(),v=(0,n.iH)(),b=(0,n.iH)(),w=(0,n.iH)(0),f=(0,n.iH)(),k=(0,n.iH)([]),U=[2,10],g=10,h=(0,n.qj)({room_name:"",pwd:"",streak:void 0,winner_count:void 0,room_count:void 0,owner_rate:0,ticket:void 0,end_time:1,pass_rank:"不限段位",mode_id:void 0,mode_name:"",mode:""}),A=(0,n.iH)(""),C=()=>h.room_count?h.winner_count?h.ticket?h.mode_id?o.userInfo.balance<h.room_count*h.ticket?v.value.show=!0:void(p.value&&p.value.updateShow()):(0,V.CF)("请选择打擂模式"):(0,V.CF)("请输入房间门票"):(0,V.CF)("请选择赢家人数"):(0,V.CF)("请选择房间人数"),y=()=>{let e=JSON.parse(JSON.stringify(h));"不限段位"===e.pass_rank&&delete e.pass_rank,(0,z.u5)(e).then(e=>{200==e.code&&(b.value=e.data.room_id,_.value&&_.value.updateShow())})},H=e=>{g=e,h.room_count=e,h.winner_count=void 0},I=e=>{h.pass_rank=e},N=()=>{t.value&&(t.value.show=!0)},P=e=>{h.winner_count=e},q=()=>{if(h.end_time<=1)return h.end_time=1;h.end_time-=1},R=()=>{if(h.end_time>=24)return h.end_time=24;h.end_time+=1},B=()=>{r.value&&r.value.updateShow(U)},Z=()=>{if(!h.room_count)return(0,V.CF)({message:"请先选择房间人数"});m.value&&m.value.updateShow([1,g])},J=e=>{h.mode_id=e.id,h.mode_name=e.name,h.mode=e.mode,A.value=e.describe};return(0,n.bv)(()=>{(0,z.O)().then(e=>{200==e.code&&(f.value=e.data.room_fee)}),(0,z.r)().then(e=>{200==e.code&&e.data&&(k.value=e.data,k.value.length>0&&J(k.value[0]))})}),(0,n.YP)(h,e=>{e.ticket&&e.winner_count?w.value=(e.ticket*e.room_count-e.ticket*e.room_count*(e.owner_rate/100)-e.ticket*e.room_count*(f.value/100))/e.winner_count:w.value=0},{deep:!0}),(e,o)=>{let c=a.l2,f=i.gN,U=l.zx;return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(c,{class:"header","safe-area-inset-top":"",border:!1,fixed:"","left-arrow":!1,placeholder:"",onClickLeft:o[0]||(o[0]=e=>(0,n.SU)(d.Z).back())},{left:(0,n.w5)(()=>o[10]||(o[10]=[(0,n._)("img",{src:u,alt:"icon",class:"back-icon"},null,-1)])),title:(0,n.w5)(()=>o[11]||(o[11]=[(0,n._)("p",{class:"title"},"创建房间",-1)])),_:1}),(0,n._)("div",F,[(0,n._)("div",Q,[o[13]||(o[13]=(0,n._)("p",{class:"box-item-title"},"房间人数：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).room_count?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur"),onClick:B},[o[12]||(o[12]=(0,n._)("img",{class:"down",src:s,alt:"down"},null,-1)),(0,n.Wm)(f,{modelValue:(0,n.SU)(h).room_count,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.SU)(h).room_count=e),autocomplete:"off",readonly:"",placeholder:"请选择房间人数"},null,8,["modelValue"])],2)]),(0,n._)("div",O,[o[15]||(o[15]=(0,n._)("p",{class:"box-item-title"},"赢家人数：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).winner_count?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur"),onClick:Z},[o[14]||(o[14]=(0,n._)("img",{class:"down",src:s,alt:"down"},null,-1)),(0,n.Wm)(f,{modelValue:(0,n.SU)(h).winner_count,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,n.SU)(h).winner_count=e),autocomplete:"off",readonly:"",placeholder:"请选择赢家人数"},null,8,["modelValue"])],2)]),(0,n._)("div",K,[o[16]||(o[16]=(0,n._)("p",{class:"box-item-title"},"房间门票：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).ticket?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur")},[(0,n.Wm)(f,{modelValue:(0,n.SU)(h).ticket,"onUpdate:modelValue":o[3]||(o[3]=e=>(0,n.SU)(h).ticket=e),min:20,type:"digit",autocomplete:"off",placeholder:"请输入房间门票"},null,8,["modelValue"])],2)]),(0,n._)("div",L,[o[18]||(o[18]=(0,n._)("p",{class:"box-item-title"},"最低段位：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).pass_rank?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur"),onClick:N},[o[17]||(o[17]=(0,n._)("img",{class:"down",src:s,alt:"down"},null,-1)),(0,n.Wm)(f,{modelValue:(0,n.SU)(h).pass_rank,"onUpdate:modelValue":o[4]||(o[4]=e=>(0,n.SU)(h).pass_rank=e),autocomplete:"off",readonly:"",placeholder:"请选择最低段位"},null,8,["modelValue"])],2)]),(0,n._)("div",M,[o[20]||(o[20]=(0,n._)("p",{class:"box-item-title"},"房间时效：",-1)),(0,n._)("div",T,[(0,n._)("div",E,[(0,n._)("div",null,[(0,n._)("div",{class:"reduce",onClick:q})]),(0,n.Wm)(f,{class:"input",modelValue:(0,n.SU)(h).end_time,"onUpdate:modelValue":o[5]||(o[5]=e=>(0,n.SU)(h).end_time=e),modelModifiers:{number:!0},readonly:"",min:0,max:24,type:"digit",autocomplete:"off"},null,8,["modelValue"]),(0,n._)("div",null,[(0,n._)("div",{class:"add",onClick:R})])]),o[19]||(o[19]=(0,n._)("p",null,"小时",-1))])]),(0,n._)("div",G,[o[21]||(o[21]=(0,n._)("p",{class:"box-item-title"},"自动续房：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).streak?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur")},[(0,n.Wm)(f,{modelValue:(0,n.SU)(h).streak,"onUpdate:modelValue":o[6]||(o[6]=e=>(0,n.SU)(h).streak=e),type:"digit",autocomplete:"off",min:1,max:99,placeholder:"房间结束时自动续上(1-99次)"},null,8,["modelValue"])],2)]),(0,n._)("div",X,[o[23]||(o[23]=(0,n._)("p",{class:"box-item-title"},"抽水比例：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).owner_rate?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur")},[(0,n.Wm)(f,{modelValue:(0,n.SU)(h).owner_rate,"onUpdate:modelValue":o[7]||(o[7]=e=>(0,n.SU)(h).owner_rate=e),autocomplete:"off",type:"digit",min:0,max:99,placeholder:"请输入抽水比例"},{"right-icon":(0,n.w5)(()=>o[22]||(o[22]=[(0,n.Uk)(" % ")])),_:1},8,["modelValue"])],2)]),(0,n._)("div",$,[o[24]||(o[24]=(0,n._)("p",{class:"box-item-title"},"房间密码：",-1)),(0,n._)("div",{class:(0,n.C_)((0,n.SU)(h).pwd?"box-item-input input-box-item-focus":"box-item-input input-box-item-blur")},[(0,n.Wm)(f,{modelValue:(0,n.SU)(h).pwd,"onUpdate:modelValue":o[8]||(o[8]=e=>(0,n.SU)(h).pwd=e),autocomplete:"off",type:"digit",placeholder:"非必填"},null,8,["modelValue"])],2)]),(0,n._)("div",ee,[o[25]||(o[25]=(0,n._)("p",{class:"box-item-title"},"奖励：",-1)),(0,n._)("div",eo,[(0,n.Wm)(f,{modelValue:(0,n.SU)(w),"onUpdate:modelValue":o[9]||(o[9]=e=>(0,n.dq)(w)?w.value=e:null),readonly:"",autocomplete:"off",type:"digit"},null,8,["modelValue"])])]),(0,n._)("div",et,[o[26]||(o[26]=(0,n._)("p",{class:"box-item-title"},"打擂模式：",-1)),(0,n._)("div",el,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,n.SU)(k),(e,o)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,n.C_)((0,n.SU)(h).mode_id==e.id?"mode-item-active":"mode-item"),key:o,onClick:o=>J(e)},[(0,n._)("p",null,(0,n.zw)(e.name),1)],10,ei))),128))])]),(0,n._)("div",ea,[o[27]||(o[27]=(0,n._)("div",{class:"title"},"模式说明",-1)),(0,n._)("div",{innerHTML:(0,n.SU)(A)},null,8,en)])]),(0,n._)("div",eu,[(0,n._)("div",es,[(0,n.Wm)(U,{round:"",block:"",onClick:C},{default:(0,n.w5)(()=>o[28]||(o[28]=[(0,n.Uk)("立即创建")])),_:1})])]),(0,n.Wm)(x,{ref_key:"roomPicker",ref:r,room_count:(0,n.SU)(h).room_count?(0,n.SU)(h).room_count:2,onChangeRoomNumber:H},null,8,["room_count"]),(0,n.Wm)(S,{ref_key:"winPicker",ref:m,winner_count:(0,n.SU)(h).winner_count?(0,n.SU)(h).winner_count:1,onChangeWinNumber:P},null,8,["winner_count"]),(0,n.Wm)(W,{ref_key:"tips",ref:p,room_count:(0,n.SU)(h).room_count,ticket:(0,n.SU)(h).ticket,onSureSubmit:y},null,8,["room_count","ticket"]),(0,n.Wm)(D,{ref_key:"createSuccess",ref:_,roomId:(0,n.SU)(b),roomPwd:(0,n.SU)(h).pwd},null,8,["roomId","roomPwd"]),(0,n.Wm)(j.Z,{ref_key:"balance",ref:v},null,512),(0,n.Wm)(Y,{ref_key:"rankPicker",ref:t,pass_rank:(0,n.SU)(h).pass_rank,onChangeRank:I},null,8,["pass_rank"])])}}}),ec=(0,f.default)(ed,[["__scopeId","data-v-2231d8ae"]])}}]);