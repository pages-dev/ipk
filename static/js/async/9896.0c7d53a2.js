"use strict";(self.webpackChunkrebuild_vue3_vant4=self.webpackChunkrebuild_vue3_vant4||[]).push([["9896"],{5689:function(e,t,a){a.r(t),a.d(t,{default:()=>E});var l=a(4210);a(8246);var n=a(4936);a(276);var s=a(1346);a(3974);var r=a(9155);a(3720);var i=a(6653);a(5161);var u=a(3919);a(5454);var c=a(796),o=a(9395),d=a(6265),v=a(2250),_=a(4496),m=a(1277),p=a(352);a(7307);var w=a(2991);a(8491);let b={class:"top"},g={class:"time"},k={class:"time-content"},S={class:"value"},U={class:"value"},h={class:"value"},f={class:"page"},y={class:"container"},H={key:0},D={class:"list-top"},N={class:"list-title"},C={class:"progress"},M={class:"list-btm"},x={key:2,class:"rule_html"},z=["innerHTML"],q={class:"popup-box"},j={class:"popup-box-cont"},I=["innerHTML"],L={class:"popup-box-button"},T=(0,c.aZ)({__name:"Statement",emits:["loadData"],setup(e,t){let{emit:T}=t;(0,_.A)();let E=(0,c.iH)(!1),W=(0,c.iH)([]),A=(0,c.iH)(),F=(0,c.iH)(!1),K=(e,t)=>e>=Number(t)?Number(t):e,P=(e,t)=>e>=Number(t)?0:Number(t)-e,Y=(e,t,a)=>{let l=Number(a.statement);return e<l?0:l===Math.max(...t.map(e=>Number(e.statement)).filter(t=>e>=t))?2:1},Z=(e,t)=>{t.sort((e,t)=>Number(e.statement)-Number(t.statement));let a=t[t.length-1];for(let a=0;a<t.length;a++)if(Number(t[a].statement)<=e&&(F.value=!0),Number(t[a].statement)>=e)return{remainingDays:Number(t[a].statement),needPoint:Number(t[a].statement)-e,points:t[a].reward};return{remainingDays:Number(a.statement),needPoint:Number(a.statement)-e,points:a.reward}};(0,c.Fl)(()=>W.value.length>0?Z(W.value[0].currentCount,W.value[0].rule_list):{remainingDays:0,needPoint:0,points:0});let B=(e,t)=>e/Number(t)*100>100?100:e/Number(t)*100||0,G=async e=>{200===(await (0,p.R9)({a_id:e})).code&&(0,w.XA)({message:"领取成功",onClose:()=>{R()}})},R=async()=>{Q&&(clearInterval(Q),Q=null);let e=await (0,p.K3)({type:"all_statement"});200===e.code&&e.data&&(W.value=e.data,X.value=e.data[0].cycle?e.data[0].cycle:"",e.data[0].cycle&&(X.value=e.data[0].cycle||"week",V(),Q=setInterval(V,6e4)))},X=(0,c.iH)("week"),$=(0,c.iH)("00"),J=(0,c.iH)("00"),O=(0,c.iH)("00"),Q=null;function V(){let e=(function(e){let t=new Date,a=new Date(t);switch(e){case"day":a.setHours(23,59,59,999);break;case"week":let l=t.getDay();a.setDate(t.getDate()+(0===l?0:7-l)),a.setHours(23,59,59,999);break;case"month":a.setMonth(a.getMonth()+1,0),a.setHours(23,59,59,999);break;case"quarter":let n=3*Math.floor(t.getMonth()/3)+2;a.setMonth(n+1,0),a.setHours(23,59,59,999);break;case"year":a.setMonth(11,31),a.setHours(23,59,59,999)}return a})(X.value).getTime()-Date.now();if(e<=0){$.value="00",J.value="00",O.value="00";return}let t=Math.floor(e/6e4),a=Math.floor(t/1440),l=Math.floor(t%1440/60);$.value=String(a).padStart(2,"0"),J.value=String(l).padStart(2,"0"),O.value=String(t%60).padStart(2,"0")}return(0,c.bv)(()=>{R()}),(0,c.SK)(()=>{Q&&clearInterval(Q)}),(e,t)=>{let _=u.l2,p=i.Ee,w=r.zx,T=s.Ex,F=n.HY,Z=l.GI;return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(_,{class:"header","safe-area-inset-top":"",border:!1,fixed:"","z-index":"2","left-arrow":!1,placeholder:"",onClickLeft:t[0]||(t[0]=e=>(0,c.SU)(m.Z).back())},{left:(0,c.w5)(()=>t[4]||(t[4]=[(0,c._)("img",{src:o,alt:"icon",class:"back-icon"},null,-1)])),title:(0,c.w5)(()=>t[5]||(t[5]=[(0,c._)("p",{class:"title"},"周流水返利",-1)])),_:1}),(0,c._)("div",b,[(0,c._)("div",g,[t[9]||(t[9]=(0,c._)("span",{class:"time-title"},[(0,c._)("span",{class:"line"}),(0,c._)("span",null,"倒计时"),(0,c._)("span",{class:"line"})],-1)),(0,c._)("span",k,[(0,c._)("span",S,(0,c.zw)((0,c.SU)($)),1),t[6]||(t[6]=(0,c._)("span",null,"天",-1)),(0,c._)("span",U,(0,c.zw)((0,c.SU)(J)),1),t[7]||(t[7]=(0,c._)("span",null,"时",-1)),(0,c._)("span",h,(0,c.zw)((0,c.SU)(O)),1),t[8]||(t[8]=(0,c._)("span",null,"分",-1))])])]),(0,c._)("div",f,[(0,c._)("div",y,[(0,c.SU)(W).length>0?((0,c.wg)(),(0,c.iD)("div",H,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,c.SU)(W)[0].rule_list,(e,l)=>((0,c.wg)(),(0,c.iD)("div",{class:"list",key:l},[(0,c._)("div",D,[(0,c._)("div",null,[(0,c._)("div",N,[(0,c._)("span",null,"流水"+(0,c.zw)(e.statement)+"送"+(0,c.zw)(e.reward),1)])]),"1"==(0,c.SU)(W)[0].status&&0===(0,c.SU)(W)[0].receive&&0==Y((0,c.SU)(W)[0].currentCount,(0,c.SU)(W)[0].rule_list,e)?((0,c.wg)(),(0,c.j4)(p,{key:0,width:"72",src:a(8214)},null,8,["src"])):(0,c.kq)("",!0),1==Y((0,c.SU)(W)[0].currentCount,(0,c.SU)(W)[0].rule_list,e)&&"1"==(0,c.SU)(W)[0].status&&0===(0,c.SU)(W)[0].receive?((0,c.wg)(),(0,c.j4)(w,{key:1,block:"",round:"",class:"cancel_btn"},{default:(0,c.w5)(()=>t[10]||(t[10]=[(0,c.Uk)(" 立即领取 ")])),_:1})):(0,c.kq)("",!0),"1"==(0,c.SU)(W)[0].status&&0===(0,c.SU)(W)[0].receive&&2==Y((0,c.SU)(W)[0].currentCount,(0,c.SU)(W)[0].rule_list,e)?((0,c.wg)(),(0,c.j4)(p,{key:2,onClick:t[1]||(t[1]=e=>G((0,c.SU)(W)[0].id)),width:"72",src:a(8299)},null,8,["src"])):(0,c.kq)("",!0),1===(0,c.SU)(W)[0].receive&&2==Y((0,c.SU)(W)[0].currentCount,(0,c.SU)(W)[0].rule_list,e)?((0,c.wg)(),(0,c.j4)(p,{key:3,width:"72",src:a(3243)},null,8,["src"])):(0,c.kq)("",!0)]),(0,c._)("div",C,[(0,c.Wm)(T,{percentage:B((0,c.SU)(W)[0].currentCount,e.statement),"track-color":"#352918",color:"linear-gradient(90deg, rgba(255, 255, 255, 0.00) 86.33%, rgba(255, 255, 255, 0.70) 99.72%), linear-gradient(180deg, #F3E295 0%, #AB6E0F 100%)","stroke-width":"14","show-pivot":!1},null,8,["percentage"])]),(0,c._)("div",M,[(0,c._)("div",null,[t[11]||(t[11]=(0,c.Uk)("当前有效流水：")),(0,c._)("span",null,(0,c.zw)(K((0,c.SU)(W)[0].currentCount,e.statement)),1)]),(0,c._)("div",null,[t[12]||(t[12]=(0,c.Uk)(" 预计还需投：")),(0,c._)("span",null,(0,c.zw)(P((0,c.SU)(W)[0].currentCount,e.statement)),1)])])]))),128))])):((0,c.wg)(),(0,c.j4)(F,{key:1,description:"暂无活动"})),t[13]||(t[13]=(0,c._)("div",{class:"box-title"},[(0,c._)("div",{class:"title-left"}),(0,c._)("p",null,"活动规则")],-1)),(0,c.SU)(W).length>0?((0,c.wg)(),(0,c.iD)("div",x,[(0,c._)("div",{innerHTML:(0,c.SU)(W)[0].activityDescribe},null,8,z)])):(0,c.kq)("",!0)])]),(0,c.Wm)(Z,{show:(0,c.SU)(E),"onUpdate:show":t[3]||(t[3]=e=>(0,c.dq)(E)?E.value=e:null),class:"popup",position:"center"},{default:(0,c.w5)(()=>[(0,c._)("div",q,[t[14]||(t[14]=(0,c._)("div",{class:"popup-box-title"},[(0,c._)("img",{src:d,alt:"icon"}),(0,c._)("h3",null,"活动规则"),(0,c._)("img",{src:v,alt:"icon"})],-1)),(0,c._)("div",j,[(0,c._)("div",{innerHTML:(0,c.SU)(A)},null,8,I)]),(0,c._)("div",L,[(0,c.Wm)(w,{block:"",round:"",class:"btn",onClick:t[2]||(t[2]=e=>E.value=!1)},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("binding.confirm")),1)]),_:1})])])]),_:1},8,["show"])],64)}}}),E=(0,a(3744).default)(T,[["__scopeId","data-v-41aa3126"]])}}]);