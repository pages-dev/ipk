"use strict";(self.webpackChunkrebuild_vue3_vant4=self.webpackChunkrebuild_vue3_vant4||[]).push([["1646"],{6544:function(){},3720:function(e,l,t){t(2136),t(8649),t(1058),t(6376),t(318)},6437:function(e,l,t){t.d(l,{ZP:()=>g,x_:()=>d});var r=t(796),a=t(6460),i=t(6016),n=t(1884),o=t(7401),u=t(4123);let[s,c]=(0,a.do)("cell"),d={tag:(0,i.SQ)("div"),icon:String,size:String,title:i.Or,value:i.Or,label:i.Or,center:Boolean,isLink:Boolean,border:i.J5,iconPrefix:String,valueClass:i.Vg,labelClass:i.Vg,titleClass:i.Vg,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},f=(0,n.l7)({},d,o.g2);var g=(0,r.aZ)({name:s,props:f,setup(e,{slots:l}){let t=(0,o.yj)(),a=()=>{if(l.label||(0,n.Xq)(e.label))return(0,r.Wm)("div",{class:[c("label"),e.labelClass]},[l.label?l.label():e.label])},i=()=>{var t;if(l.title||(0,n.Xq)(e.title)){let i=null==(t=l.title)?void 0:t.call(l);if(Array.isArray(i)&&0===i.length)return;return(0,r.Wm)("div",{class:[c("title"),e.titleClass],style:e.titleStyle},[i||(0,r.Wm)("span",null,[e.title]),a()])}},s=()=>{let t=l.value||l.default;if(t||(0,n.Xq)(e.value))return(0,r.Wm)("div",{class:[c("value"),e.valueClass]},[t?t():(0,r.Wm)("span",null,[e.value])])},d=()=>l.icon?l.icon():e.icon?(0,r.Wm)(u.JO,{name:e.icon,class:c("left-icon"),classPrefix:e.iconPrefix},null):void 0,f=()=>{if(l["right-icon"])return l["right-icon"]();if(e.isLink){let l=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,r.Wm)(u.JO,{name:l,class:c("right-icon")},null)}};return()=>{var a;let{tag:n,size:o,center:u,border:g,isLink:v,required:m}=e,p=null!=(a=e.clickable)?a:v,b={center:u,required:!!m,clickable:p,borderless:!g};return o&&(b[o]=!!o),(0,r.Wm)(n,{class:c(b),role:p?"button":void 0,tabindex:p?0:void 0,onClick:t},{default:()=>{var e;return[d(),i(),s(),f(),null==(e=l.extra)?void 0:e.call(l)]}})}}})},7703:function(e,l,t){t.d(l,{bL:()=>i});var r=t(3794),a=t(6437);let i=(0,r.n)(a.ZP)},5e3:function(e,l,t){t.d(l,{gN:()=>M});var r=t(3794),a=t(796),i=t(6460),n=t(6016),o=t(1884),u=t(8478),s=t(3288),c=t(7682);function d(e){return Array.isArray(e)?!e.length:0!==e&&!e}function f(e,l){let{message:t}=l;return(0,o.mf)(t)?t(e,l):t||""}function g({target:e}){e.composing=!0}function v({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function m(e){return[...e].length}function p(e,l){return[...e].slice(0,l).join("")}var b=t(6437),h=t(1477),y=t(8681),k=t(7085),S=t(4123),W=t(7703);let[w,x]=(0,i.do)("field"),C={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:n.Or,max:Number,min:Number,formatter:Function,clearIcon:(0,n.SQ)("clear"),modelValue:(0,n.SI)(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:(0,n.SQ)("focus"),formatTrigger:(0,n.SQ)("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},q=(0,o.l7)({},b.x_,C,{rows:n.Or,type:(0,n.SQ)("text"),rules:Array,autosize:[Boolean,Object],labelWidth:n.Or,labelClass:n.Vg,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var B=(0,a.aZ)({name:w,props:q,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:l,slots:t}){let r=(0,y.M)(),i=(0,a.qj)({status:"unvalidated",focused:!1,validateMessage:""}),n=(0,a.iH)(),b=(0,a.iH)(),w=(0,a.iH)(),{parent:C}=(0,h.NB)(u.WN),q=()=>{var l;return String(null!=(l=e.modelValue)?l:"")},B=l=>(0,o.Xq)(e[l])?e[l]:C&&(0,o.Xq)(C.props[l])?C.props[l]:void 0,M=(0,a.Fl)(()=>{let l=B("readonly");if(e.clearable&&!l){let l=""!==q(),t="always"===e.clearTrigger||"focus"===e.clearTrigger&&i.focused;return l&&t}return!1}),V=(0,a.Fl)(()=>w.value&&t.input?w.value():e.modelValue),I=(0,a.Fl)(()=>{var l;let t=B("required");return"auto"===t?null==(l=e.rules)?void 0:l.some(e=>e.required):t}),P=e=>e.reduce((e,l)=>e.then(()=>{if("failed"===i.status)return;let{value:e}=V;if(l.formatter&&(e=l.formatter(e,l)),!function(e,l){if(d(e)){if(l.required)return!1;if(!1===l.validateEmpty)return!0}return!l.pattern||!!l.pattern.test(String(e))}(e,l)){i.status="failed",i.validateMessage=f(e,l);return}if(l.validator){var t;if(d(e)&&!1===l.validateEmpty)return;return(t=e,new Promise(e=>{let r=l.validator(t,l);if((0,o.tI)(r)){r.then(e);return}e(r)})).then(t=>{t&&"string"==typeof t?(i.status="failed",i.validateMessage=t):!1===t&&(i.status="failed",i.validateMessage=f(e,l))})}}),Promise.resolve()),O=()=>{i.status="unvalidated",i.validateMessage=""},A=()=>l("endValidate",{status:i.status,message:i.validateMessage}),F=(t=e.rules)=>new Promise(r=>{O(),t?(l("startValidate"),P(t).then(()=>{"failed"===i.status?r({name:e.name,message:i.validateMessage}):(i.status="passed",r()),A()})):r()}),z=l=>{if(C&&e.rules){let{validateTrigger:t}=C.props,r=(0,o.qo)(t).includes(l),a=e.rules.filter(e=>e.trigger?(0,o.qo)(e.trigger).includes(l):r);a.length&&F(a)}},L=l=>{var t;let{maxlength:r}=e;if((0,o.Xq)(r)&&m(l)>+r){let e=q();if(e&&m(e)===+r)return e;let a=null==(t=n.value)?void 0:t.selectionEnd;if(i.focused&&a){let e=[...l],t=e.length-+r;return e.splice(a-t,t),e.join("")}return p(l,+r)}return l},X=(t,r="onChange")=>{var a,u;let c=t;t=L(t);let d=m(c)-m(t);if("number"===e.type||"digit"===e.type){let l="number"===e.type;t=(0,s.uf)(t,l,l),"onBlur"===r&&""!==t&&(void 0!==e.min||void 0!==e.max)&&(t=(0,s.uZ)(+t,null!=(a=e.min)?a:-1/0,null!=(u=e.max)?u:1/0).toString())}let f=0;if(e.formatter&&r===e.formatTrigger){let{formatter:l,maxlength:r}=e;if(t=l(t),(0,o.Xq)(r)&&m(t)>+r&&(t=p(t,+r)),n.value&&i.focused){let{selectionEnd:e}=n.value,t=p(c,e);f=m(l(t))-m(t)}}if(n.value&&n.value.value!==t){if(i.focused){let{selectionStart:e,selectionEnd:l}=n.value;if(n.value.value=t,(0,o.Xq)(e)&&(0,o.Xq)(l)){let r=m(t);d?(e-=d,l-=d):f&&(e+=f,l+=f),n.value.setSelectionRange(Math.min(e,r),Math.min(l,r))}}else n.value.value=t}t!==e.modelValue&&l("update:modelValue",t)},E=e=>{e.target.composing||X(e.target.value)},J=()=>{var e;return null==(e=n.value)?void 0:e.blur()},D=()=>{var e;return null==(e=n.value)?void 0:e.focus()},N=()=>{let l=n.value;"textarea"===e.type&&e.autosize&&l&&function(e,l){let t=(0,c.oD)();e.style.height="auto";let r=e.scrollHeight;if((0,o.Kn)(l)){let{maxHeight:e,minHeight:t}=l;void 0!==e&&(r=Math.min(r,e)),void 0!==t&&(r=Math.max(r,t))}r&&(e.style.height=`${r}px`,(0,c.kn)(t))}(l,e.autosize)},$=e=>{i.focused=!0,l("focus",e),(0,a.Y3)(N),B("readonly")&&J()},T=e=>{i.focused=!1,X(q(),"onBlur"),l("blur",e),!B("readonly")&&(z("onBlur"),(0,a.Y3)(N),(0,c.pe)())},_=e=>l("clickInput",e),j=e=>l("clickLeftIcon",e),Q=e=>l("clickRightIcon",e),Y=(0,a.Fl)(()=>"boolean"==typeof e.error?e.error:!!C&&!!C.props.showError&&"failed"===i.status||void 0),Z=(0,a.Fl)(()=>{let e=B("labelWidth"),l=B("labelAlign");if(e&&"top"!==l)return{width:(0,s.Nn)(e)}}),H=t=>{13===t.keyCode&&(C&&C.props.submitOnEnter||"textarea"===e.type||(0,c.PF)(t),"search"===e.type&&J()),l("keypress",t)},R=()=>e.id||`${r}-input`,G=()=>{var l,i;let o=x("control",[B("inputAlign"),{error:Y.value,custom:!!t.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(t.input)return(0,a.Wm)("div",{class:o,onClick:_},[t.input()]);let u={id:R(),ref:n,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:o,disabled:B("disabled"),readonly:B("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:T,onFocus:$,onInput:E,onClick:_,onChange:v,onKeypress:H,onCompositionend:v,onCompositionstart:g};return"textarea"===e.type?(0,a.Wm)("textarea",(0,a.dG)(u,{inputmode:e.inputmode}),null):(0,a.Wm)("input",(0,a.dG)((l=e.type,i=e.inputmode,"number"===l&&(l="text",null!=i||(i="decimal")),"digit"===l&&(l="tel",null!=i||(i="numeric")),{type:l,inputmode:i}),u),null)},K=()=>{let l=t["left-icon"];if(e.leftIcon||l)return(0,a.Wm)("div",{class:x("left-icon"),onClick:j},[l?l():(0,a.Wm)(S.JO,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},U=()=>{let l=t["right-icon"];if(e.rightIcon||l)return(0,a.Wm)("div",{class:x("right-icon"),onClick:Q},[l?l():(0,a.Wm)(S.JO,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ee=()=>{if(e.showWordLimit&&e.maxlength){let l=m(q());return(0,a.Wm)("div",{class:x("word-limit")},[(0,a.Wm)("span",{class:x("word-num")},[l]),(0,a.Uk)("/"),e.maxlength])}},el=()=>{if(C&&!1===C.props.showErrorMessage)return;let l=e.errorMessage||i.validateMessage;if(l){let e=t["error-message"],r=B("errorMessageAlign");return(0,a.Wm)("div",{class:x("error-message",r)},[e?e({message:l}):l])}},et=()=>{let l=B("labelWidth"),i=B("labelAlign"),n=B("colon")?":":"";return t.label?[t.label(),n]:e.label?(0,a.Wm)("label",{id:`${r}-label`,for:t.input?void 0:R(),"data-allow-mismatch":"attribute",onClick:e=>{(0,c.PF)(e),D()},style:"top"===i&&l?{width:(0,s.Nn)(l)}:void 0},[e.label+n]):void 0},er=()=>[(0,a.Wm)("div",{class:x("body")},[G(),M.value&&(0,a.Wm)(S.JO,{ref:b,name:e.clearIcon,class:x("clear")},null),U(),t.button&&(0,a.Wm)("div",{class:x("button")},[t.button()])]),ee(),el()];return(0,k.F)({blur:J,focus:D,validate:F,formValue:V,resetValidation:O,getValidationStatus:()=>i.status}),(0,a.JJ)(h.F1,{customValue:w,resetValidation:O,validateWithTrigger:z}),(0,a.YP)(()=>e.modelValue,()=>{X(q()),O(),z("onChange"),(0,a.Y3)(N)}),(0,a.bv)(()=>{X(q(),e.formatTrigger),(0,a.Y3)(N)}),(0,h.OR)("touchstart",e=>{(0,c.PF)(e),l("update:modelValue",""),l("clear",e)},{target:(0,a.Fl)(()=>{var e;return null==(e=b.value)?void 0:e.$el})}),()=>{let l=B("disabled"),r=B("labelAlign"),i=K();return(0,a.Wm)(W.bL,{size:e.size,class:x({error:Y.value,disabled:l,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Z.value,valueClass:x("value"),titleClass:[x("label",[r,{required:I.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:i&&"top"!==r?()=>i:null,title:()=>{let e=et();return"top"===r?[i,e].filter(Boolean):e||[]},value:er,extra:t.extra})}}});let M=(0,r.n)(B)},9242:function(e,l,t){t(2136),t(8649),t(1058),t(6544)}}]);