"use strict";(self.webpackChunkrebuild_vue3_vant4=self.webpackChunkrebuild_vue3_vant4||[]).push([["408"],{9258:function(){},3603:function(){},3919:function(e,l,a){a.d(l,{l2:()=>f});var t=a(3794),i=a(796),o=a(6460),r=a(6016),n=a(3288),s=a(8478),u=a(2778),c=a(4123);let[v,d]=(0,o.do)("nav-bar"),m={title:String,fixed:Boolean,zIndex:r.Or,border:r.J5,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:r.J5};var p=(0,i.aZ)({name:v,props:m,emits:["clickLeft","clickRight"],setup(e,{emit:l,slots:a}){let t=(0,i.iH)(),o=(0,u.J)(t,d),r=a=>{e.leftDisabled||l("clickLeft",a)},v=a=>{e.rightDisabled||l("clickRight",a)},m=()=>a.left?a.left():[e.leftArrow&&(0,i.Wm)(c.JO,{class:d("arrow"),name:"arrow-left"},null),e.leftText&&(0,i.Wm)("span",{class:d("text")},[e.leftText])],p=()=>a.right?a.right():(0,i.Wm)("span",{class:d("text")},[e.rightText]),f=()=>{let{title:l,fixed:o,border:u,zIndex:c}=e,f=(0,n.As)(c),g=e.leftArrow||e.leftText||a.left,h=e.rightText||a.right;return(0,i.Wm)("div",{ref:t,style:f,class:[d({fixed:o}),{[s.xe]:u,"van-safe-area-top":e.safeAreaInsetTop}]},[(0,i.Wm)("div",{class:d("content")},[g&&(0,i.Wm)("div",{class:[d("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?s.e9:""],onClick:r},[m()]),(0,i.Wm)("div",{class:[d("title"),"van-ellipsis"]},[a.title?a.title():l]),h&&(0,i.Wm)("div",{class:[d("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?s.e9:""],onClick:v},[p()])])])};return()=>e.fixed&&e.placeholder?o(f):f()}});let f=(0,t.n)(p)},5454:function(e,l,a){a(2136),a(8649),a(1058)},8079:function(e,l,a){a.d(l,{j:()=>d});var t=a(3794),i=a(796),o=a(6460),r=a(2126),n=a(1477),s=a(7085);let[u,c]=(0,o.do)("swipe-item");var v=(0,i.aZ)({name:u,setup(e,{slots:l}){let a;let t=(0,i.qj)({offset:0,inited:!1,mounted:!1}),{parent:o,index:u}=(0,n.NB)(r.PG);if(!o)return;let v=(0,i.Fl)(()=>{let e={},{vertical:l}=o.props;return o.size.value&&(e[l?"height":"width"]=`${o.size.value}px`),t.offset&&(e.transform=`translate${l?"Y":"X"}(${t.offset}px)`),e}),d=(0,i.Fl)(()=>{let{loop:e,lazyRender:l}=o.props;if(!l||a)return!0;if(!t.mounted)return!1;let i=o.activeIndicator.value,r=o.count.value-1;return a=u.value===i||u.value===(0===i&&e?r:i-1)||u.value===(i===r&&e?0:i+1)});return(0,i.bv)(()=>{(0,i.Y3)(()=>{t.mounted=!0})}),(0,s.F)({setOffset:e=>{t.offset=e}}),()=>{var e;return(0,i.Wm)("div",{class:c(),style:v.value},[d.value?null==(e=l.default)?void 0:e.call(l):null])}}});let d=(0,t.n)(v)},2126:function(e,l,a){a.d(l,{PG:()=>f,ZP:()=>g});var t=a(796),i=a(6460),o=a(6016),r=a(3288),n=a(7682),s=a(1477),u=a(4971),c=a(7085),v=a(4519);let[d,m]=(0,i.do)("swipe"),p={loop:o.J5,width:o.Or,height:o.Or,vertical:Boolean,autoplay:(0,o.SI)(0),duration:(0,o.SI)(500),touchable:o.J5,lazyRender:Boolean,initialSwipe:(0,o.SI)(0),indicatorColor:String,showIndicators:o.J5,stopPropagation:o.J5},f=Symbol(d);var g=(0,t.aZ)({name:d,props:p,emits:["change","dragStart","dragEnd"],setup(e,{emit:l,slots:a}){let i,o;let d=(0,t.iH)(),p=(0,t.iH)(),g=(0,t.qj)({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),h=!1,w=(0,u.o)(),{children:b,linkChildren:y}=(0,s.$E)(f),x=(0,t.Fl)(()=>b.length),S=(0,t.Fl)(()=>g[e.vertical?"height":"width"]),W=(0,t.Fl)(()=>e.vertical?w.deltaY.value:w.deltaX.value),C=(0,t.Fl)(()=>g.rect?(e.vertical?g.rect.height:g.rect.width)-S.value*x.value:0),O=(0,t.Fl)(()=>S.value?Math.ceil(Math.abs(C.value)/S.value):x.value),P=(0,t.Fl)(()=>x.value*S.value),I=(0,t.Fl)(()=>(g.active+x.value)%x.value),k=(0,t.Fl)(()=>{let l=e.vertical?"vertical":"horizontal";return w.direction.value===l}),F=(0,t.Fl)(()=>{let l={transitionDuration:`${g.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+g.offset.toFixed(2)}px)`};if(S.value){let a=e.vertical?"height":"width",t=e.vertical?"width":"height";l[a]=`${P.value}px`,l[t]=e[t]?`${e[t]}px`:""}return l}),Z=l=>{let{active:a}=g;return l?e.loop?(0,r.uZ)(a+l,-1,x.value):(0,r.uZ)(a+l,0,O.value):a},z=(l,a=0)=>{let t=l*S.value;e.loop||(t=Math.min(t,-C.value));let i=a-t;return e.loop||(i=(0,r.uZ)(i,C.value,0)),i},Y=({pace:a=0,offset:t=0,emitChange:i})=>{if(x.value<=1)return;let{active:o}=g,r=Z(a),n=z(r,t);if(e.loop){if(b[0]&&n!==C.value){let e=n<C.value;b[0].setOffset(e?P.value:0)}if(b[x.value-1]&&0!==n){let e=n>0;b[x.value-1].setOffset(e?-P.value:0)}}g.active=r,g.offset=n,i&&r!==o&&l("change",I.value)},R=()=>{g.swiping=!0,g.active<=-1?Y({pace:x.value}):g.active>=x.value&&Y({pace:-x.value})},B=()=>{R(),w.reset(),(0,s.d1)(()=>{g.swiping=!1,Y({pace:1,emitChange:!0})})},T=()=>clearTimeout(i),J=()=>{T(),+e.autoplay>0&&x.value>1&&(i=setTimeout(()=>{B(),J()},+e.autoplay))},j=(l=+e.initialSwipe)=>{if(!d.value)return;let a=()=>{var a,t;if(!(0,n.xj)(d)){let l={width:d.value.offsetWidth,height:d.value.offsetHeight};g.rect=l,g.width=+(null!=(a=e.width)?a:l.width),g.height=+(null!=(t=e.height)?t:l.height)}x.value&&-1===(l=Math.min(x.value-1,l))&&(l=x.value-1),g.active=l,g.swiping=!0,g.offset=z(l),b.forEach(e=>{e.setOffset(0)}),J()};(0,n.xj)(d)?(0,t.Y3)().then(a):a()},D=()=>j(g.active),A=l=>{e.touchable&&!(l.touches.length>1)&&(w.start(l),h=!1,o=Date.now(),T(),R())},H=()=>{if(!e.touchable||!g.swiping)return;let a=Date.now()-o;if((Math.abs(W.value/a)>.25||Math.abs(W.value)>S.value/2)&&k.value){let l=e.vertical?w.offsetY.value:w.offsetX.value,a=0;Y({pace:e.loop?l>0?W.value>0?-1:1:0:-Math[W.value>0?"ceil":"floor"](W.value/S.value),emitChange:!0})}else W.value&&Y({pace:0});h=!1,g.swiping=!1,l("dragEnd",{index:I.value}),J()},X=(l,a)=>{let i=a===I.value,o=i?{backgroundColor:e.indicatorColor}:void 0;return(0,t.Wm)("i",{style:o,class:m("indicator",{active:i})},null)},U=()=>a.indicator?a.indicator({active:I.value,total:x.value}):e.showIndicators&&x.value>1?(0,t.Wm)("div",{class:m("indicators",{vertical:e.vertical})},[Array(x.value).fill("").map(X)]):void 0;return(0,c.F)({prev:()=>{R(),w.reset(),(0,s.d1)(()=>{g.swiping=!1,Y({pace:-1,emitChange:!0})})},next:B,state:g,resize:D,swipeTo:(l,a={})=>{R(),w.reset(),(0,s.d1)(()=>{let t;t=e.loop&&l===x.value?0===g.active?0:l:l%x.value,a.immediate?(0,s.d1)(()=>{g.swiping=!1}):g.swiping=!1,Y({pace:t-g.active,emitChange:!0})})}}),y({size:S,props:e,count:x,activeIndicator:I}),(0,t.YP)(()=>e.initialSwipe,e=>j(+e)),(0,t.YP)(x,()=>j(g.active)),(0,t.YP)(()=>e.autoplay,J),(0,t.YP)([n.bn,n.uK,()=>e.width,()=>e.height],D),(0,t.YP)((0,s.d9)(),e=>{"visible"===e?J():T()}),(0,t.bv)(j),(0,t.dl)(()=>j(g.active)),(0,v.h)(()=>j(g.active)),(0,t.se)(T),(0,t.Jd)(T),(0,s.OR)("touchmove",a=>{e.touchable&&g.swiping&&(w.move(a),!k.value||!e.loop&&(0===g.active&&W.value>0||g.active===x.value-1&&W.value<0)||((0,n.PF)(a,e.stopPropagation),Y({offset:W.value}),h||(l("dragStart",{index:I.value}),h=!0)))},{target:p}),()=>{var l;return(0,t.Wm)("div",{ref:d,class:m()},[(0,t.Wm)("div",{ref:p,style:F.value,class:m("track",{vertical:e.vertical}),onTouchstartPassive:A,onTouchend:H,onTouchcancel:H},[null==(l=a.default)?void 0:l.call(a)]),U()])}}})},1059:function(e,l,a){a.d(l,{oF:()=>o});var t=a(3794),i=a(2126);let o=(0,t.n)(i.ZP)},781:function(e,l,a){let t;a.d(l,{Qm:()=>M});var i=a(3794),o=a(796),r=a(6016),n=a(1884),s=a(3288),u=a(6460);let[c,v,d]=(0,u.do)("uploader");function m(e,l){return new Promise(a=>{if("file"===l){a();return}let t=new FileReader;t.onload=e=>{a(e.target.result)},"dataUrl"===l?t.readAsDataURL(e):"text"===l&&t.readAsText(e)})}function p(e,l){return(0,n.qo)(e).some(e=>!!e.file&&((0,n.mf)(l)?l(e.file):e.file.size>+l))}let f=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,g=e=>f.test(e);function h(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?g(e.url):"string"==typeof e.content&&0===e.content.indexOf("data:image"))}var w=a(1477),b=a(7085),y=a(4123),x=a(1342),S=a(6576),W=a(8478),C=a(7682),O=a(1059),P=a(4210),I=a(4971),k=a(6653),F=a(8309),Z=a(8079);let z=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),Y=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),R=(0,u.do)("image-preview")[1],B={src:String,show:Boolean,active:Number,minZoom:(0,r.ir)(r.Or),maxZoom:(0,r.ir)(r.Or),rootWidth:(0,r.ir)(Number),rootHeight:(0,r.ir)(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var T=(0,o.aZ)({props:B,emits:["scale","close","longPress"],setup(e,{emit:l,slots:a}){let t,i,r,n,u,c,v,d;let m=(0,o.qj)({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),p=(0,I.o)(),f=(0,o.iH)(),g=(0,o.iH)(),h=(0,o.iH)(!1),y=(0,o.iH)(!1),x=0,S=(0,o.Fl)(()=>{let{scale:e,moveX:l,moveY:a,moving:t,zooming:i,initializing:o}=m,r={transitionDuration:i||t||o?"0s":".3s"};return(1!==e||y.value)&&(r.transform=`matrix(${e}, 0, 0, ${e}, ${l}, ${a})`),r}),O=(0,o.Fl)(()=>{if(m.imageRatio){let{rootWidth:l,rootHeight:a}=e,t=h.value?a/m.imageRatio:l;return Math.max(0,(m.scale*t-l)/2)}return 0}),P=(0,o.Fl)(()=>{if(m.imageRatio){let{rootWidth:l,rootHeight:a}=e,t=h.value?a:l*m.imageRatio;return Math.max(0,(m.scale*t-a)/2)}return 0}),B=(a,t)=>{var i;if((a=(0,s.uZ)(a,+e.minZoom,+e.maxZoom+1))!==m.scale){let o=a/m.scale;if(m.scale=a,t){let e=(0,w.EL)(null==(i=f.value)?void 0:i.$el),l={x:.5*e.width,y:.5*e.height},a=m.moveX-(t.x-e.left-l.x)*(o-1),r=m.moveY-(t.y-e.top-l.y)*(o-1);m.moveX=(0,s.uZ)(a,-O.value,O.value),m.moveY=(0,s.uZ)(r,-P.value,P.value)}else m.moveX=0,m.moveY=y.value?x:0;l("scale",{scale:a,index:e.active})}},T=()=>{B(1)},J=()=>{let e=m.scale>1?1:2;B(e,2===e||y.value?{x:p.startX.value,y:p.startY.value}:void 0)},j=!1,D=l=>{let{touches:a}=l;if(2===(t=a.length)&&e.disableZoom)return;let{offsetX:o}=p;p.start(l),i=m.moveX,r=m.moveY,d=Date.now(),j=!1,m.moving=1===t&&(1!==m.scale||y.value),m.zooming=2===t&&!o.value,m.zooming&&(n=m.scale,u=z(a))},A=a=>{var t;let i=null==(t=g.value)?void 0:t.$el;if(!i)return;let o=i.firstElementChild,r=a.target===i,n=null==o?void 0:o.contains(a.target);(e.closeOnClickImage||!n)&&(e.closeOnClickOverlay||!r)&&l("close")},H=a=>{if(t>1)return;let i=Date.now()-d;p.isTap.value&&(i<250?e.doubleScale?v?(clearTimeout(v),v=null,J()):v=setTimeout(()=>{A(a),v=null},250):A(a):i>W.Cp&&l("longPress"))},X=l=>{let a=!1;if((m.moving||m.zooming)&&(a=!0,m.moving&&i===m.moveX&&r===m.moveY&&(a=!1),!l.touches.length)){m.zooming&&(m.moveX=(0,s.uZ)(m.moveX,-O.value,O.value),m.moveY=(0,s.uZ)(m.moveY,-P.value,P.value),m.zooming=!1),m.moving=!1,i=0,r=0,n=1,m.scale<1&&T();let l=+e.maxZoom;m.scale>l&&B(l,c)}(0,C.PF)(l,a),H(l),p.reset()},U=()=>{let{rootWidth:l,rootHeight:a}=e,t=a/l,{imageRatio:i}=m;h.value=m.imageRatio>t&&i<2.6,y.value=m.imageRatio>t&&i>=2.6,y.value&&(x=(i*l-a)/2,m.moveY=x,m.initializing=!0,(0,w.Wn)(()=>{m.initializing=!1})),T()},$=e=>{let{naturalWidth:l,naturalHeight:a}=e.target;m.imageRatio=a/l,U()};return(0,o.YP)(()=>e.active,T),(0,o.YP)(()=>e.show,e=>{e||T()}),(0,o.YP)(()=>[e.rootWidth,e.rootHeight],U),(0,w.OR)("touchmove",l=>{let{touches:a}=l;if(p.move(l),m.moving){let{deltaX:a,deltaY:t}=p,o=a.value+i,n=t.value+r;if((e.vertical?p.isVertical()&&Math.abs(n)>P.value:p.isHorizontal()&&Math.abs(o)>O.value)&&!j){m.moving=!1;return}j=!0,(0,C.PF)(l,!0),m.moveX=(0,s.uZ)(o,-O.value,O.value),m.moveY=(0,s.uZ)(n,-P.value,P.value)}if(m.zooming&&((0,C.PF)(l,!0),2===a.length)){let e=z(a);B(n*e/u,c=Y(a))}},{target:(0,o.Fl)(()=>{var e;return null==(e=g.value)?void 0:e.$el})}),(0,b.F)({resetScale:T}),()=>{let l={loading:()=>(0,o.Wm)(F.gb,{type:"spinner"},null)};return(0,o.Wm)(Z.j,{ref:g,class:R("swipe-item"),onTouchstartPassive:D,onTouchend:X,onTouchcancel:X},{default:()=>[a.image?(0,o.Wm)("div",{class:R("image-wrap")},[a.image({src:e.src,onLoad:$,style:S.value})]):(0,o.Wm)(k.Ee,{ref:f,src:e.src,fit:"contain",class:R("image",{vertical:h.value}),style:S.value,onLoad:$},l)]})}}});let[J,j]=(0,u.do)("image-preview"),D=["show","teleport","transition","overlayStyle","closeOnPopstate"],A={show:Boolean,loop:r.J5,images:(0,r.Ce)(),minZoom:(0,r.SI)(1/3),maxZoom:(0,r.SI)(3),overlay:r.J5,vertical:Boolean,closeable:Boolean,showIndex:r.J5,className:r.Vg,closeIcon:(0,r.SQ)("clear"),transition:String,beforeClose:Function,doubleScale:r.J5,overlayClass:r.Vg,overlayStyle:Object,swipeDuration:(0,r.SI)(300),startPosition:(0,r.SI)(0),showIndicators:Boolean,closeOnPopstate:r.J5,closeOnClickImage:r.J5,closeOnClickOverlay:r.J5,closeIconPosition:(0,r.SQ)("top-right"),teleport:[String,Object]};var H=(0,o.aZ)({name:J,props:A,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:l,slots:a}){let t=(0,o.iH)(),i=(0,o.iH)(),r=(0,o.qj)({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),s=()=>{if(t.value){let e=(0,w.EL)(t.value.$el);r.rootWidth=e.width,r.rootHeight=e.height,t.value.resize()}},u=e=>l("scale",e),c=e=>l("update:show",e),v=()=>{(0,S.I)(e.beforeClose,{args:[r.active],done:()=>c(!1)})},d=e=>{e!==r.active&&(r.active=e,l("change",e))},m=()=>{if(e.showIndex)return(0,o.Wm)("div",{class:j("index")},[a.index?a.index({index:r.active}):`${r.active+1} / ${e.images.length}`])},p=()=>{if(a.cover)return(0,o.Wm)("div",{class:j("cover")},[a.cover()])},f=()=>{r.disableZoom=!0},g=()=>{r.disableZoom=!1},h=()=>(0,o.Wm)(O.oF,{ref:t,lazyRender:!0,loop:e.loop,class:j("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:d,onDragEnd:g,onDragStart:f},{default:()=>[e.images.map((t,n)=>(0,o.Wm)(T,{ref:e=>{n===r.active&&(i.value=e)},src:t,show:e.show,active:r.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:r.rootWidth,rootHeight:r.rootHeight,disableZoom:r.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:u,onClose:v,onLongPress:()=>l("longPress",{index:n})},{image:a.image}))]}),x=()=>{if(e.closeable)return(0,o.Wm)(y.JO,{role:"button",name:e.closeIcon,class:[j("close-icon",e.closeIconPosition),W.e9],onClick:v},null)},I=()=>l("closed"),k=(e,l)=>{var a;return null==(a=t.value)?void 0:a.swipeTo(e,l)};return(0,b.F)({resetScale:()=>{var e;null==(e=i.value)||e.resetScale()},swipeTo:k}),(0,o.bv)(s),(0,o.YP)([C.bn,C.uK],s),(0,o.YP)(()=>e.startPosition,e=>d(+e)),(0,o.YP)(()=>e.show,a=>{let{images:t,startPosition:i}=e;a?(d(+i),(0,o.Y3)(()=>{s(),k(+i,{immediate:!0})})):l("close",{index:r.active,url:t[r.active]})}),()=>(0,o.Wm)(P.GI,(0,o.dG)({class:[j(),e.className],overlayClass:[j("overlay"),e.overlayClass],onClosed:I,"onUpdate:show":c},(0,n.ei)(e,D)),{default:()=>[x(),h(),m(),p()]})}});let X={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"},U=(e,l=0)=>{if(n._f)return t||({instance:t}=(0,x.H)({setup(){let{state:e,toggle:l}=(0,x.o)(),a=()=>{e.images=[]};return()=>(0,o.Wm)(H,(0,o.dG)(e,{onClosed:a,"onUpdate:show":l}),null)}})),e=Array.isArray(e)?{images:e,startPosition:l}:e,t.open((0,n.l7)({},X,e)),t};var $=(0,o.aZ)({props:{name:r.Or,item:(0,r.ir)(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:l,slots:a}){let t=()=>{let{status:l,message:a}=e.item;if("uploading"===l||"failed"===l){let e="failed"===l?(0,o.Wm)(y.JO,{name:"close",class:v("mask-icon")},null):(0,o.Wm)(F.gb,{class:v("loading")},null),t=(0,n.Xq)(a)&&""!==a;return(0,o.Wm)("div",{class:v("mask")},[e,t&&(0,o.Wm)("div",{class:v("mask-message")},[a])])}},i=a=>{let{name:t,item:i,index:o,beforeDelete:r}=e;a.stopPropagation(),(0,S.I)(r,{args:[i,{name:t,index:o}],done:()=>l("delete")})},r=()=>l("preview"),u=()=>l("reupload"),c=()=>{if(e.deletable&&"uploading"!==e.item.status){let e=a["preview-delete"];return(0,o.Wm)("div",{role:"button",class:v("preview-delete",{shadow:!e}),tabindex:0,"aria-label":d("delete"),onClick:i},[e?e():(0,o.Wm)(y.JO,{name:"cross",class:v("preview-delete-icon")},null)])}},m=()=>{if(a["preview-cover"]){let{index:l,item:t}=e;return(0,o.Wm)("div",{class:v("preview-cover")},[a["preview-cover"]((0,n.l7)({index:l},t))])}},p=()=>{let{item:l,lazyLoad:a,imageFit:t,previewSize:i,reupload:n}=e;return h(l)?(0,o.Wm)(k.Ee,{fit:t,src:l.objectUrl||l.content||l.url,class:v("preview-image"),width:Array.isArray(i)?i[0]:i,height:Array.isArray(i)?i[1]:i,lazyLoad:a,onClick:n?u:r},{default:m}):(0,o.Wm)("div",{class:v("file"),style:(0,s.Xn)(e.previewSize)},[(0,o.Wm)(y.JO,{class:v("file-icon"),name:"description"},null),(0,o.Wm)("div",{class:[v("file-name"),"van-ellipsis"]},[l.file?l.file.name:l.url]),m()])};return()=>(0,o.Wm)("div",{class:v("preview")},[p(),t(),c()])}});let L={name:(0,r.SI)(""),accept:(0,r.SQ)("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:(0,r.SI)(1/0),imageFit:(0,r.SQ)("cover"),resultType:(0,r.SQ)("dataUrl"),uploadIcon:(0,r.SQ)("photograph"),uploadText:String,deletable:r.J5,reupload:Boolean,afterRead:Function,showUpload:r.J5,modelValue:(0,r.Ce)(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:r.J5,previewOptions:Object,previewFullImage:r.J5,maxSize:{type:[Number,String,Function],default:1/0}};var V=(0,o.aZ)({name:c,props:L,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:l,slots:a}){let t;let i=(0,o.iH)(),r=[],u=(0,o.iH)(-1),c=(0,o.iH)(!1),d=(l=e.modelValue.length)=>({name:e.name,index:l}),f=()=>{i.value&&(i.value.value="")},g=a=>{if(f(),p(a,e.maxSize)){if(Array.isArray(a)){let t=function(e,l){let a=[],t=[];return e.forEach(e=>{p(e,l)?t.push(e):a.push(e)}),{valid:a,invalid:t}}(a,e.maxSize);if(a=t.valid,l("oversize",t.invalid,d()),!a.length)return}else{l("oversize",a,d());return}}if(a=(0,o.qj)(a),u.value>-1){let t=[...e.modelValue];t.splice(u.value,1,a),l("update:modelValue",t),u.value=-1}else l("update:modelValue",[...e.modelValue,...(0,n.qo)(a)]);e.afterRead&&e.afterRead(a,d())},x=l=>{let{maxCount:a,modelValue:t,resultType:i}=e;if(Array.isArray(l)){let e=+a-t.length;l.length>e&&(l=l.slice(0,e)),Promise.all(l.map(e=>m(e,i))).then(e=>{g(l.map((l,a)=>{let t={file:l,status:"",message:"",objectUrl:URL.createObjectURL(l)};return e[a]&&(t.content=e[a]),t}))})}else m(l,i).then(e=>{let a={file:l,status:"",message:"",objectUrl:URL.createObjectURL(l)};e&&(a.content=e),g(a)})},S=l=>{let{files:a}=l.target;if(e.disabled||!a||!a.length)return;let t=1===a.length?a[0]:[].slice.call(a);if(e.beforeRead){let l=e.beforeRead(t,d());if(!l){f();return}if((0,n.tI)(l)){l.then(e=>{e?x(e):x(t)}).catch(f);return}}x(t)},W=()=>l("closePreview"),C=l=>{if(e.previewFullImage){let a=e.modelValue.filter(h),i=a.map(e=>(e.objectUrl&&!e.url&&"failed"!==e.status&&(e.url=e.objectUrl,r.push(e.url)),e.url)).filter(Boolean);t=U((0,n.l7)({images:i,startPosition:a.indexOf(l),onClose:W},e.previewOptions))}},O=(a,t)=>{let i=e.modelValue.slice(0);i.splice(t,1),l("update:modelValue",i),l("delete",a,d(t))},P=e=>{c.value=!0,u.value=e,(0,o.Y3)(()=>Y())},I=()=>{c.value||(u.value=-1),c.value=!1},k=(t,i)=>{let r=["imageFit","deletable","reupload","previewSize","beforeDelete"],s=(0,n.l7)((0,n.ei)(e,r),(0,n.ei)(t,r,!0));return(0,o.Wm)($,(0,o.dG)({item:t,index:i,onClick:()=>l(e.reupload?"clickReupload":"clickPreview",t,d(i)),onDelete:()=>O(t,i),onPreview:()=>C(t),onReupload:()=>P(i)},(0,n.ei)(e,["name","lazyLoad"]),s),(0,n.ei)(a,["preview-cover","preview-delete"]))},F=()=>{if(e.previewImage)return e.modelValue.map(k)},Z=e=>l("clickUpload",e),z=()=>{let l=e.modelValue.length<+e.maxCount,t=e.readonly?null:(0,o.Wm)("input",{ref:i,type:"file",class:v("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&-1===u.value,disabled:e.disabled,onChange:S,onClick:I},null);return a.default?(0,o.wy)((0,o.Wm)("div",{class:v("input-wrapper"),onClick:Z},[a.default(),t]),[[o.F8,l]]):(0,o.wy)((0,o.Wm)("div",{class:v("upload",{readonly:e.readonly}),style:(0,s.Xn)(e.previewSize),onClick:Z},[(0,o.Wm)(y.JO,{name:e.uploadIcon,class:v("upload-icon")},null),e.uploadText&&(0,o.Wm)("span",{class:v("upload-text")},[e.uploadText]),t]),[[o.F8,e.showUpload&&l]])},Y=()=>{i.value&&!e.disabled&&i.value.click()};return(0,o.Jd)(()=>{r.forEach(e=>URL.revokeObjectURL(e))}),(0,b.F)({chooseFile:Y,reuploadFile:P,closeImagePreview:()=>{t&&t.close()}}),(0,w.aM)(()=>e.modelValue),()=>(0,o.Wm)("div",{class:v()},[(0,o.Wm)("div",{class:v("wrapper",{disabled:e.disabled})},[F(),z()])])}});let M=(0,i.n)(V)},8153:function(e,l,a){a(2136),a(8649),a(1058),a(1496),a(6376),a(7016),a(2057),a(3603),a(9258)}}]);